{# templates/partials/navbar.html.twig #}

<nav class="navbar navbar-expand-lg navbar-custom">
    <div class="container">
        
        {# --- 1. LOGO (Común para todos) --- #}
        <a class="brand-text" href="{{ path('app_inicio') }}">
            <img class="logo_mascotalia" src="{{ asset('imagenes/logo_mascotalia.png') }}" alt="logo_mascotalia">
            &nbsp;Mascotalia
        </a>

      

        <div class="collapse navbar-collapse" id="navbarContent">
            
            {# --- 2. ENLACES CENTRALES (Cambian según quién eres) --- #}
            <ul class="navbar-nav mx-auto">
                
                {% if is_granted('ROLE_ADMIN') %}
                    {# --- MENÚ DE ADMIN --- #}
                    <li class="nav-item"><a class="nav-link nav-link-custom" href="{{ path('app_inicio') }}">Home</a></li>
                    <li class="nav-item"><a class="nav-link nav-link-custom" href="{{ path('app_admin_mascotas') }}">Gestionar Mascotas</a></li>
                    <li class="nav-item"><a class="nav-link nav-link-custom" href="{{ path('app_admin_solicitudes') }}">Gestionar Solicitudes</a></li>

                {% elseif app.user %}
                    {# --- MENÚ DE CLIENTE LOGUEADO --- #}
                    <li class="nav-item"><a class="nav-link nav-link-custom" href="{{ path('app_inicio') }}">Home</a></li>
                    <li class="nav-item"><a class="nav-link nav-link-custom" href="{{ path('app_mascotas') }}">Ver Mascotas</a></li>
                    <li class="nav-item"><a class="nav-link nav-link-custom" href="{{ path('app_mis_solicitudes') }}">Mis Solicitudes</a></li>

                {% else %}
                    {# --- MENÚ DE VISITANTE (DESLOGUEADO) --- #}
                    <li class="nav-item"><a class="nav-link nav-link-custom" href="{{ path('app_inicio') }}">Home</a></li>
                    <li class="nav-item"><a class="nav-link nav-link-custom" href="{{ path('app_mascotas') }}">Ver Mascotas</a></li>
                    <li class="nav-item"><a class="nav-link nav-link-custom" href="{{ path('app_login') }}">Mis Solicitudes</a></li>
                {% endif %}

            </ul>

            {# --- 3. BOTONES DERECHA (Login/Registro vs Perfil/Salir) --- #}
            <div class="d-flex gap-2 align-items-center">
                
                {% if app.user %}
                    {# ESTADO: LOGUEADO (Sea Admin o Cliente) #}

                    {# Dropdown o Botones de Usuario #}
                    <div class="dropdown">
                        <button class="btn btn-outline-custom dropdown-toggle" type="button" data-bs-toggle="dropdown">
                            Mi Cuenta
                        </button>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li><a class="dropdown-item" href="{{ path('app_perfil') }}">Mi Perfil</a></li>
                            <li><hr class="dropdown-divider"></li>
                            {# El path 'app_logout' lo crearemos luego con security #}
                            <li><a class="dropdown-item text-danger" href="{{ path('app_logout') }}">Cerrar Sesión</a></li>
                        </ul>
                    </div>

                {% else %}
                    {# ESTADO: DESLOGUEADO #}
                    <a href="{{ path('app_login') }}" class="btn btn-outline-custom">Login</a>
                    <a href="{{ path('app_register') }}" class="btn btn-filled-custom">Registrarse</a>
                {% endif %}

            </div>
        </div>
    </div>
</nav>